# Proposal: 增强占位符管理功能

## 背景

用户对当前 Template Filler 提出 5 项功能需求，涉及预览、配置和模板管理。

---

## 问题与解决方案

### 1. 模板预览方案

**问题**：DOCX 转 HTML 丢失样式，PDF 需要 LibreOffice 太重。

**替代方案**：
| 方案 | 优点 | 缺点 |
|------|------|------|
| **Office Online Viewer** | 完美渲染 | 需在线/上传 |
| **Google Docs Viewer** | 免费 | 有大小限制 |
| **docx-preview.js** | 纯前端 | 需要额外库 |
| **保持 HTML（当前）** | 简单 | 样式不完整 |

**推荐**：使用 `docx-preview.js` 纯前端渲染，无需服务端转换。

---

### 2. 快速配置占位符 Prompt

**需求**：每个占位符可以快速填写/编辑 prompt。

**方案**：在占位符标签旁添加编辑功能
- 点击占位符标签 → 弹出 prompt 编辑框
- 支持预设 prompt 模板（一键填充常见需求）

---

### 3. 切换 LLM/手动模式

**需求**：部分占位符不需要 LLM，直接填写固定内容。

**方案**：每个占位符支持三种模式
- `auto` - LLM 自动生成
- `select` - LLM 生成多个选项供选择
- `manual` - 手动输入固定内容

---

### 4. 单独重新生成

**需求**：满意的内容保留，不满意的单独重新生成。

**方案**：
- 每个填充内容旁增加 "🔄 重新生成" 按钮
- 点击后仅重新调用该占位符的 LLM

---

### 5. 配置收藏/模板库

**需求**：保存常用模板的占位符配置。

**方案**：
- 模板 + 配置 组合保存
- 下次上传相同模板时，自动加载保存的配置
- 或手动从收藏列表选择

---

## 界面设计

```
┌─────────────────────────────────────────────────────────────┐
│ 📄 Template Filler   [上传] [💾 保存配置] [📂 加载配置]     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────┐  ┌─────────────────────────────┐  │
│  │  模板预览            │  │  占位符配置                  │  │
│  │  (docx-preview)     │  │                             │  │
│  │                     │  │  TITLE [auto ▾] [📝 编辑]    │  │
│  │                     │  │  ┌ prompt... ─────────┐     │  │
│  │                     │  │                             │  │
│  │                     │  │  SUMMARY [manual ▾]         │  │
│  │                     │  │  ┌ 直接输入内容... ───┐     │  │
│  │                     │  │                             │  │
│  └─────────────────────┘  └─────────────────────────────┘  │
│                                                             │
│  ┌──────────────────────────────────────────────────────┐  │
│  │  填充内容                                             │  │
│  │  TITLE: xxx                           [🔄 重新生成]   │  │
│  │  SUMMARY: yyy                         [🔄 重新生成]   │  │
│  └──────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
```

---

## Scope

- [x] 预览优化（docx-preview.js）
- [x] 占位符 prompt 编辑
- [x] LLM/手动模式切换
- [x] 单独重新生成
- [x] 配置收藏功能
